/**
 * @license RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/domReady for details
 */

define("Function/bind",[],function(){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}})}),define("Array/collect",[],function(){Array.prototype.collect=function(e){var t=[];if(typeof e=="string")for(var n=-1,r=this.length;++n<r;)t.push(this[n][e]);else for(var n=-1,r=this.length;++n<r;)t.push(e(this[n]));return t}}),define("Array/each",[],function(){Array.prototype.each=function(e){for(var t=0,n=this.length;t<n;t++)e(this[t],t);return this}}),define("Array/first",[],function(){Array.prototype.first=function(e){for(var t=0,n=this.length;t<n;t++)if(e(this[t]))return this[t];return null}}),define("Array/has",[],function(){Array.prototype.has=function(e){for(var t=this.length;t--;)if(this[t]===e)return!0;return!1}}),define("Array/last",[],function(){Array.prototype.last=function(){return this[this.length-1]}}),define("Array/map",[],function(){Array.prototype.map=function(e,t){t&&(e=e.bind(t));var n=this.slice();if(typeof e=="function")for(var r=0,i=n.length;r<i;r++)n[r]=e(n[r],r);else{e=e.substr(2,e.length);for(var r=0,i=n.length;r<i;r++)n[r]=n[r][e]()}return n}}),define("Array/onEls",[],function(){Array.prototype.onEls=function(e){for(var t=this.length;t--;)this[t]=e(this[t]);return this}}),define("Array/remove",[],function(){Array.prototype.remove=function(e){for(var t=this.length;t--;)this[t]===e&&this.splice(t,1);return this}}),define("Array/removeOneValue",[],function(){Array.prototype.removeOneValue=function(e){for(var t=this.length;t--;)if(this[t]===e)return this.splice(t,1)}}),define("Array/except",[],function(){Array.prototype.except=function(e){var t=[];for(var n=0,r=this.length;n<r;n++)this[n]!==e&&t.push(this[n]);return t}}),define("Array/exceptFn",[],function(){Array.prototype.exceptFn=function(e){var t=this.slice();for(var n=t.length;n--;)e(t[n])&&t.splice(n,1);return t}}),define("Array/isIn",["Array/has"],function(){Array.prototype.isIn=function(e){for(var t=this.length;t--;)if(!e.has(this[t]))return!1;return!0}}),define("Array/uniq",["Array/has"],function(){Array.prototype.uniq=function(e){if(!e){var t=[];for(var n=this.length;n--;)!t.has(this[n])&&t.push(this[n]);return t}var t=[],r=[];for(var n=0,i=this.length;n<i;n++){var s=e(this[n]);r.has(s)||(t.push(this[n]),r.push(s))}return t}}),define("Array/equals",["Array/isIn"],function(){Array.prototype.equals=function(e){return this.isIn(e)&&e.isIn(this)?!0:!1}}),define("Array/find",[],function(){Array.prototype.find=function(e){for(var t=0,n=this.length;t<n;t++)if(e(this[t]))return this[t]}}),define("Array/basics",["./collect","./each","./first","./has","./last","./map","./onEls","./remove","./removeOneValue","./remove","./except","./exceptFn","./isIn","./uniq","./equals","./find"],{}),define("objects/extend",[],function(){return function(e){e.prototype&&(e=e.prototype);for(var t=1,n=arguments.length;t<n;t++){var r=arguments[t].prototype||arguments[t];for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}}),define("Array/math/all",["objects/extend"],function(e){e(Array.prototype,{equals:function(e){for(var t=this.length;t--;)if(e[t]!==this[t])return!1;return!0},multiply:function(e){var t=[];if(typeof e=="number")for(var n=this.length;n--;)t[n]=this[n]*e;else for(var n=this.length;n--;)t[n]=this[n]*e[n];return t},divide:function(e){var t=[];if(typeof e=="number")for(var n=this.length;n--;)t[n]=this[n]/e;else for(var n=this.length;n--;)t[n]=this[n]/e[n];return t},minus:function(e){var t=[];if(typeof e=="number")for(var n=this.length;n--;)t[n]=this[n]-e;else for(var n=this.length;n--;)t[n]=this[n]-e[n];return t},add:function(e){var t=[];if(typeof e=="number")for(var n=this.length;n--;)t[n]=this[n]+e;else for(var n=this.length;n--;)t[n]=this[n]+e[n];return t},round:function(){for(var e=this.length;e--;)this[e]=Math.round(this[e]);return this},orth:function(){if(this.length!=2)throw Error;return[-this[1],this[0]]},norm:function(){return Math.sqrt(this.sum(function(e){return e*e}))}})}),define("Array/all",["Array/basics","Array/math/all"]),define("String/capitalize",[],function(){String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}}),define("core/String/isBlank",[],function(){String.prototype.isBlank=function(){return!this||/^\s*$/.test(this)}}),define("String/isBlank",function(){}),define("String/pluralize",[],function(){String.prototype.pluralize=function(){return this+"s"}}),define("String/safe",[],function(){String.prototype.safe=function(){return this.replace(/</g,"&lt;").replace(/>/g,"&gt;")}}),define("String/singularize",[],function(){String.prototype.singularize=function(){return this.substr(0,this.length-1)}}),define("String/uncapitalize",[],function(){String.prototype.uncapitalize=function(){return this[0].toLowerCase()+this.substr(1,this.length-1)}}),define("String/basics",["./capitalize","./isBlank","./pluralize","./safe","./singularize","./uncapitalize"]),define("String/all",["./basics"]),define("Seed/Extendable",[],function(){var e=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},t=function(e){for(var t=1,n=arguments.length;t<n;t++){var r=typeof arguments[t]=="object"||typeof arguments[t]=="function"?arguments[t]:{};for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e},n=function(){};n.prototype.init=function(){},n["new"]=function(e,t){(typeof t[0]!="boolean"||t[0]!==!1)&&e.init.apply(e,t)};var r=function(e,n){return typeof n=="undefined"?e:typeof n=="object"&&typeof e=="object"?t({},e,n):n},i=function(e,t){return typeof e=="function"||typeof t=="function"?function(){var n=typeof e=="function"?e.apply(this,arguments):e,i=typeof t=="function"?t.apply(this,arguments):t;return r(n,i)}:r(e,t)},s=function(e,t){var n={},r=function(){};for(var s in t)if(t.hasOwnProperty(s)){var o=/(^\+|^-)(.*)/g;if(o.test(s)){var u=s.replace(o,"$2"),a=e[u]||r,f=t[s];switch(s.charAt(0)){case"+":n[u]=i(a,f);break;case"-":n[u]=i(f,a)}}else n[s]=t[s]}return n},o=function(e,n){var r;r=function(e){r["new"].call(r,this,arguments)};var i=t({},e,s(e,n));for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o]);return r};return n.extend=function(n){var r=function(e){r["new"].call(r,this,arguments)},i=e(this);for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o]);return r.prototype=t(new this(!1),s(this.prototype,n)),r},n}),define("Seed/Eventable",["Seed/Extendable","Array/remove","Array/map","String/capitalize"],function(e){return e.extend({init:function(){this._events={},this._attached=[]},fire:function(e){var t=this._events[e];if(t){var n=Array.prototype.slice.call(arguments,1);for(var r=t.length;r--;)t[r].fn.apply(t[r].subscriber,n)}},on:function(e,t,n){var r=e.split(" ");if(typeof t=="function"){var i=n;n=t,t=i}if(r.length===1)return this._on(r[0],t,n);var s=[];for(var o=0;o<r.length;o++)s[o].push(this._on(evtName,t,n));return{un:function(){for(var e=0;e<s.length;e++)s[e].un()}}},_on:function(e,t,n){if(t&&typeof t.attach!="function")throw new Error("The subscriber should have a attach(event) method");typeof n=="string"?n=t[n]:typeof n=="undefined"&&(n=t["on"+e.capitalize()]);if(typeof n!="function")throw new Error("Cannot find the function to subscribe to "+e);var r=this,i={fn:n,subscriber:t},s={un:function(){r._rmSubscription(e,i)}};return t.attach(s),(this._events[e]||(this._events[e]=[])).push(i),s},_rmSubscription:function(e,t){this._events[e].remove(t),this._events[e].length==0&&delete this._events[e]},attach:function(e){this._attached.push(e)},detachAll:function(){for(var e=0;e<this._attached.length;e++)this._attached[e].un();this._attached=[]}})}),define("Array/send",[],function(){Array.prototype.send=function(e){var t=Array.prototype.slice.call(arguments);t.splice(0,1);if(typeof e=="string")for(var n=-1,r=this.length;++n<r;)this[n][e].apply(this[n],t);else for(var n=-1,r=this.length;++n<r;)e.apply({},[this[n]].concat(t));return this}}),define("Seed/Seed",["Seed/Eventable","Array/send"],function(e){return e.extend({init:function(e){e=e||{},this._events=[],this._attached=[],this._subs=[],this._o=e,e._a&&(this._a=e._a),this.setOptions()},options:{},setOptions:function(){if(this.options)for(var e in this.options)this.options.hasOwnProperty(e)&&(typeof this._o[e]=="undefined"?this[e]=this.options[e]:this[e]=this._o[e])},sub:function(e,t){if(typeof e!="function")throw new Error("C is not a valid constructor");var n=new e(this.subParams(t));return this._subs.push(n),n},subParams:function(e){return e||(e={}),e._parent=this,this._a&&(e._a=this._a),e},destroy:function(){this.detachAll();for(var e=0;e<this._subs.length;e++)this._subs[e].destroy()}})}),define("Skwitch/Timeline/AbstractInteraction",["Seed/Seed"],function(e){return e.extend({"+options":{config:null,name:null,initAppState:null,timeline:null},"+init":function(){this._interactionCount=0,this.buildEl(),typeof this.initAppState!==null&&this.forceToState(this.initAppState),this.state=this.getState(),this.initEvents()},forceInteractionToAppState:function(){},onClick:function(){this.fire("next")},detectInteractionEnd:function(){this._interactionCount++;var e=this.timeline.getStatesDelta(),t=this.config.get("intervalBeforeInteractionEnd"),n=t;setTimeout(function(){this._interactionCount--,this._interactionCount||this.fire("end")}.bind(this),n)},onInteraction:function(){this.state=this.getState(),this.fire("change",this.state),this.detectInteractionEnd()}})}),function(){var e=function(t,n){var r=t,i,s,o,u,a,f,l,c,h,p;r.tag||(r.tag="div"),o=document.createElement(r.tag);if(r.attr)for(u in r.attr)r.attr.hasOwnProperty(u)&&o.setAttribute(u,r.attr[u]);r.label&&(n[r.label]=o),r.className&&(o.className=r.className),typeof r.innerHTML!="undefined"&&(typeof r.innerHTML=="function"?o.innerHTML=r.innerHTML.call(n)||"":o.innerHTML=r.innerHTML);if(r.events)for(c in r.events)r.events.hasOwnProperty(c)&&(o["on"+c]=r.events[c]);if(r.style)for(h in r.style)r.style.hasOwnProperty(h)&&(o.style[h]=r.style[h]);if(r.children){p=r.children;for(i=0,s=p.length;i<s;i++)a=e(p[i],n),o.appendChild(a)}return o};typeof window.define=="function"?define("toDOM",[],function(){return e}):e||(window.toDOM=e)}(),define("Skwitch/Timeline/interactions/ScrollInteraction",["../AbstractInteraction","toDOM"],function(e,t){return e.extend({"+options":{name:"scroll"},initEvents:function(){window.onscroll=this.onInteraction.bind(this),document.body.onclick=this.onClick.bind(this)},buildEl:function(){this.el=t({attr:{"class":"scroll_interation"},style:{height:this._a.config.get("elHeight")+"px"}}),document.body.appendChild(this.el)},forceToState:function(e){var t=e/this._a.config.get("totalDuration"),n=t*this._a.config.get("elHeight");window.scrollTo(0,n)},getState:function(){var e=document.body.scrollTop||document.documentElement.scrollTop||window.pageYOffset||0,t=e/this._a.config.get("elHeight"),n=this._a.config.get("totalDuration")*t;return n}})}),define("Skwitch/Timeline/interactions/TouchInteraction",["../AbstractInteraction","toDOM"],function(e,t){return e.extend({"+options":{name:"touch"},initEvents:function(){document.ontouchmove=this.onTouchMove.bind(this),document.ontouchend=this.onTouchEnd.bind(this)},buildEl:function(){this.el=t({attr:{"class":"touch_interaction"}})},forceToState:function(e){this.state=e,this.onInteraction()},onTouchMove:function(e){e.preventDefault();var t=e.touches[0].clientY;if(typeof this._last=="undefined"){this._last=t;return}var n=(this._last-t)/this.config.get("scrollFactor"),r=this.state+n;this._last=t,r<0?this.state=0:this.state=r,this.onInteraction()},getState:function(){return this.state},onTouchEnd:function(){delete this._last}})}),define("Skwitch/Timeline/interactions/all",["./ScrollInteraction","./TouchInteraction"],function(e,t){return{ScrollInteraction:e,TouchInteraction:t}}),define("Skwitch/Timeline/Timeline",["Seed/Seed","./interactions/all"],function(e,t){return e.extend({"+options":{config:null,initState:null,magnets:null},"+init":function(){window.timeline=this,this.initState=this.initState||this.config.get("initState"),this.interactionName=this.config.get("interactionName"),this.buildInteraction(),this.appState=this.interaction.getState(),this.targetState=this.interaction.getState(),this.interaction.forceToState(this.targetState),this.attachEvents(),this.paused=!0},onSceneChange:function(e){},findScene:function(e){var t=this.magnets.length,n;for(var r=0;r<t;r++){var i=this.magnets[r];n=i.scene||n;if(i.instant>e)return n}},play:function(){this.paused&&(this.fire("tick",this.appState),this.paused=!1,this.watch())},pause:function(){this.paused=!0},attachEvents:function(){this.events=[this.interaction.on("change",this.onInteractionChange.bind(this),this),this.interaction.on("next",this.onInteractionNext.bind(this),this)]},detachSubscriptions:function(){this.events&&this.events.send("un")},onInteractionChange:function(e){!this._first&&Math.abs(this.appState-e)>100?(this.setTargetState(e),this.appState=e,this.fire("tick",this.appState),this._first=!0):(this.config.reset("fDelta"),this.setTweener(),this.setTargetState(e))},onInteractionEnd:function(){this.detachSubscriptions(),this.setTweener("easeIn",{fDeltaStart:this.config.get("fDelta",{current:!0})/2}),this.appToMagnet(),this.interaction.forceToState(this.targetState),this.after(300,this.attachEvents.bind(this))},onInteractionNext:function(){this.config.reset("minFDelta"),this.config.reset("maxFDelta"),this.doInteractionNext()},doInteractionNext:function(){this.detachSubscriptions(),this.toNextMagnet(),this.interaction.forceToState(this.targetState),this.after(1e3,this.attachEvents.bind(this))},toNextMagnet:function(){var e=this.magnets.find(function(e){return e.instant>this.appState+2}.bind(this));e&&(this.setTweener("easeIn",{goTo:e.instant}),this.goToMagnet(e))},after:function(e,t){setTimeout(t,e)},setTweener:function(e,t){this.twinner&&this.twinner.un();var n=this.config.set.bind(this.config);if(e==="easeIn"){var r=this.appState,i=t.goTo||this.targetState,s=this.config.get("maxFDelta"),o=t.fDeltaStart||this.config.get("minFDelta");n("fDelta",o),this.twinner=this.on("tick",function(e){var t=o+Math.sin((e-r)/(i-r)*Math.PI/2)*(s-o);n("fDelta",t)}.bind(this),this)}else this.config.reset("fDelta")},buildInteraction:function(){var e=this.interactionName;this.interaction=this.sub(t[e.capitalize()+"Interaction"],{name:e,config:this.config,initAppState:this.initState,timeline:this}),this._a.body.addClass(e)},watch:function(e){setTimeout(function(){this.paused||this.appTowardTarget(),this.watch()}.bind(this),1e3/this.config.get("fps"))},setTargetState:function(e){this.targetState=e},appTowardTarget:function(){var e=this.config.get("maxFinalStatesDelta"),t=this.getStatesDelta();if(t>e){var n=this.appState;this.appState=this.appStateBetween(this.appState,this.targetState),this.fire("tick",this.appState)}},appToMagnet:function(){var e=this.findMagnet();e&&this.goToMagnet(e)},findMagnet:function(){var e=this.targetState-this.appState>=0?"future":"past",t;if(e==="future")for(var n=0;n<this.magnets.length;n++)if(this.magnets[n].instant>this.appState+.2){t=this.magnets[n];break}if(e==="past")for(var r=this.magnets.length;r--;)if(this.magnets[r].instant<this.appState-.2){t=this.magnets[r];break}return t},goToMagnet:function(e){this.setTargetState(e.instant)},getAppState:function(){return this.appState},getStatesDelta:function(){return Math.abs(this.appState-this.targetState)},appStateBetween:function(e,t){var n=e-t,r;return t+n/this.config.get("fDelta")}})}),define("Config/Config",["Seed/Seed"],function(e){return e.extend({"+options":{values:null},"+init":function(){this.bindAllFunctionValues(),this.initValues={};for(var e in this.values)this.values.hasOwnProperty(e)&&(typeof this.values[e]=="function"?this.initValues[e]=this.values[e]():this.initValues[e]=this.values[e])},getInit:function(e){return this.initValues[e]},bindAllFunctionValues:function(){for(var e in this.values)this.values.hasOwnProperty(e)&&typeof this.values[e]=="function"&&(this.values[e]=this.values[e].bind(this))},reset:function(e){this.values[e]=this.initValues[e]},set:function(e,t){this.values[e]=t},get:function(e,t){return!t||!t.current?this.initValues[e]:typeof this.values[e]=="function"?this.values[e]():this.values[e]}})}),define("app/configs",[],function(e){return function(){return{initState:0,fps:function(){return this.get("isMobile")?30:this.get("isTablet")?80:80},fDelta:function(){return this.get("isTablet")?1.2:this.get("isMobile")?1.5:1.05},minFDelta:1.01,maxFDelta:1.1,maxFinalStatesDelta:.01,totalDuration:170,elHeight:21500,scrollFactor:60,interactionName:"ontouchstart"in window?"touch":"scroll",device:function(){return this.get("isTablet")?"tablet":this.get("isMobile")?"mobile":"desktop"},IEVersion:function(){var e=-1;if(navigator.appName=="Microsoft Internet Explorer"){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");n.exec(t)!=null&&(e=parseFloat(RegExp.$1))}return e},isIE:function(){return this.get("IEVersion")!==-1},isMobile:/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec/i.test(navigator.userAgent.toLowerCase()),isTablet:/ipad|android 3|sch-i800|playbook|tablet|kindle|gt-p1000|sgh-t849|shw-m180s|a510|a511|a100|dell streak|silk/i.test(navigator.userAgent.toLowerCase()),isIpad:function(){return navigator.userAgent.match(/iPad/i)!==null}}}}),define("app/magnets",[],function(){return[{instant:10},{instant:20},{instant:30},{instant:55},{instant:75},{instant:85},{instant:105},{instant:125}]}),define("Geo/refs",["require"],function(e){return{}}),define("Geo/Ref",["Geo/refs"],function(e){var t=function(t){this.name=t.name,this.origin=t.origin,this.factor=t.factor,e[this.name]=this};return t.prototype={isRef:!0,scale:function(e,t){this.origin=e,typeof this.factor=="number"?this.factor*=t:(this.factor[0]*=t,this.factor[1]*=t)}},t}),define("Geo/Seg",["require"],function(e){var t=Math,n=function(e,t){this.c1=e,this.c2=t};return n.prototype={isSeg:!0,getIntersectionWith:function(e){return this.c2<=e.c1||this.c1>=e.c2?null:new n(this.c1>e.c1?this.c1:e.c1,this.c2<e.c2?this.c2:e.c2)},contains:function(e){return this.c1<e&&e<this.c2},equals:function(e){return e.c1===this.c1&&e.c2===this.c2},add:function(e){this.c1+=e,this.c2+=e},getMiddle:function(){return(this.c2+this.c1)*.5},length:function(){return this.getLength()},getLength:function(){return this.c2-this.c1},scale:function(e){var t=e*this.length();this.c1=e*this.c1,this.c2=this.c1+t},multiply:function(e){this.c1=e*this.c1,this.c2=e*this.c2},round:function(){this.c1=this.c1.round(),this.c2=this.c2.round()},setMiddle:function(e){var t=this.length()/2;this.c1=e-t,this.c2=e+t}},n}),define("Geo/R4",["Geo/Seg"],function(e){var n=function(t){var n=t;if(n.segX)this.segX=n.segX,this.segY=n.segY;else if(n.isRect)this.segX=new e(n.segX.c1,n.segX.c2),this.segY=new e(n.segY.c1,n.segY.c2);else if(n.p1)this.segX=new e(n.p1[0],n.p2[0]),this.segY=new e(n.p1[1],n.p2[1]);else if(n.center){var r=n.center,i=n.size,s=i[0]/2,o=i[1]/2;this.segX=new e(r[0]-s,r[0]+s),this.segY=new e(r[1]-o,r[1]+o)}else this.segX=new e(n[0][0],n[0][0]+n[1][0]),this.segY=new e(n[0][1],n[0][1]+n[1][1]);this.value=this.getValue()};return n.prototype={isR4:!0,isIn:function(e){},getPoints:function(){var e=this.getValue();return[e[0],e[0].add(e[1])]},setCenter:function(e){return this.segX.setMiddle(e[0]),this.segY.setMiddle(e[1]),this},contains:function(e){return this.segX.contains(e[0])&&this.segY.contains(e[1])},add:function(e){return e.isPoint&&(e[0]=e.x,e[1]=e.y),this.move({vector:[-e[0],-e[1]]})},equals:function(e){return e.isR4?SegX.equals(this.segX)&&SegY.equals(this.segY):e[0][0]===this.segX.c1&&e[0][1]===this.segY.c1&&e[1][0]===this.segX.getLength()&&e[1][1]===this.segY.getLength()},getCenter:function(){return[this.segX.getMiddle(),this.segY.getMiddle()]},getIntersectionWith:function(t){return this.segX.c2<=t.segX.c1||this.segX.c1>=t.segX.c2||this.segY.c2<=t.segY.c1||this.segY.c1>=t.segY.c2?[0,0]:new n({segX:new e(this.segX.c1>t.segX.c1?this.segX.c1:t.segX.c1,this.segX.c2<t.segX.c2?this.segX.c2:t.segX.c2),segY:new e(this.segY.c1>t.segY.c1?this.segY.c1:t.segY.c1,this.segY.c2<t.segY.c2?this.segY.c2:t.segY.c2)})},scale:function(e){this.segX.scale(e),this.segY.scale(e)},withSize:function(e){return new n({centeredRect:[this.getCenter(),e]})},getValue:function(){return[[this.segX.c1,this.segY.c1],[this.segX.getLength(),this.segY.getLength()]]},clone:function(){return new n({segX:new e(this.segX.c1,this.segX.c2),segY:new e(this.segY.c1,this.segY.c2)})},setPosition:function(e){var t;e.isPoint?(this.segX.length(),this.segX.c1=e.x,this.segX.c2=e.x+t,t=this.segY.length(),this.segY.c1=e.y,this.segY.c2=e.y+t):(t=this.segX.length(),this.segX.c1=e[0],this.segX.c2=e[0]+t,t=this.segY.length(),this.segY.c1=e[1],this.segY.c2=e[1]+t)},setSize:function(e){return this.segX.c2=this.segX.c1+e[0],this.segY.c2=this.segY.c1+e[1],this},setRect:function(e){return this.segX.c1=SegX.c1,this.segX.c2=SegX.c2,this.segY.c1=SegY.c1,this.segY.c2=SegY.c2,this},round:function(e){var t=this.segX.round(),n=this.segY.round();return e&&e.override?(this.segX=t,this.segY=n,this):new this.constructor(this.getValue())},squared:function(){var e=Math.min(this.segX.length(),this.segY.length());return new t.R4({centeredRect:[this.getCenter(),[e,e]]})}},n}),define("objects/isArray",[],function(){return function(e){return typeof e=="object"&&e&&e.constructor.toString().indexOf("Array")!==-1}}),define("Geo/Point",["Geo/refs","objects/isArray"],function(e,t){var n=function(e,t){typeof e.x!="undefined"?(this.x=e.x,this.y=e.y):e.position?(this.x=e.position[0],this.y=e.position[1]):(t=t||e[2]||"window",this.x=e[0],this.y=e[1]),t?this.refName=t:e.refName&&e.refName.isRef?this.refName=e.refName.name||"db":this.refName=e.refName||"db"};return n.prototype={isPoint:!0,getValue:function(){return[this.x,this.y]},inRef:function(t){t.isRef&&(t=t.name);if(this.refName!==t){var r=e[this.refName],i=e[t],s=i.origin,o=r.origin,u=o.minus(s),a=r.factor[0]||r.factor,f=r.factor[1]||r.factor;return new n({x:(u[0]+this.x/r.factor)*i.factor,y:(u[1]+this.x/r.factor)*i.factor,refName:t})}return this.clone()},multiply:function(e){return new n({x:this.x*e,y:this.y*e,refName:this.refName})},add:function(e){return t(e)?p2Bis=new n({x:e[0],y:e[1],refName:this.refName}):p2Bis=e.inRef(this.refName),new n({x:this.x+p2Bis.x,y:this.y+p2Bis.y,refName:this.refName})},minus:function(e){var r;return t(e)?r=new n({x:e[0],y:e[1],refName:this.refName}):r=e.inRef(this.refName),new n({x:this.x-r.x,y:this.y-r.y,refName:this.refName})},clone:function(){return new n({x:this.x,y:this.y,refName:this.refName})},round:function(){return new n({x:Math.round(this.x),y:Math.round(this.y),refName:this.refName})}},n}),define("Geo/Rect",["Geo/R4","objects/extend","Geo/refs","Geo/Seg","Geo/Point"],function(e,t,n,r,i){var s=function(t,n){e.call(this,t),!t.refName&&!n?this.refName="db":t.refName&&t.refName.isRef?this.refName=t.refName.name:this.refName=t.refName||n};return t(s.prototype,e.prototype,{isRect:!0,inRef:function(e){var t=e.name||e,i=n[this.refName],o=n[t],u=o.origin,a=o.factor,f,l,c=i.factor,h=i.origin;typeof c=="number"&&(c=[c,c]),typeof a=="number"&&(a=[a,a]);var p=[a[0]/c[0],a[1]/c[1]],d=[c[0]*(u[0]-h[0]),c[1]*(u[1]-h[1])];if(!e.override)return f=new r(this.segX.c1-d[0],this.segX.c2-d[0]),f.multiply(p[0]),l=new r(this.segY.c1-d[1],this.segY.c2-d[1]),l.multiply(p[1]),new s({segX:f,segY:l},t);this.segX.add(-d[0]),this.segY.add(-d[1]),this.segX.multiply(p[0]),this.segY.multiply(p[1]),this.refName=t},withSize:function(e){return new s({center:this.getCenter(),size:e})},move:function(e){var t=this.clone(),n=e.vector,i=e.center,s=e.scale,o=e.staticPoint?e.staticPoint.clone():!1;o&&s&&(o.isPoint&&(o=o.inRef(this.refName).getValue()),i=o.minus(o.minus(t.getCenter()).multiply(s))),n&&(n.isVector&&(n=n.inRef(this.refName).getValue()),t.segX.add(n[0]),t.segY.add(n[1])),i&&(t.segX.setMiddle(i[0]),t.segY.setMiddle(i[1]));if(s){var u=s,a=u*t.segX.length(),f=t.segX.getMiddle();t.segX=new r(f-a/2,f+a/2),a=u*t.segY.length(),f=t.segY.getMiddle(),t.segY=new r(f-a/2,f+a/2)}return e.override?(this.segX=t.segX,this.segY=t.segY,this):t},position:function(){return new i({x:this.segX.c1,y:this.segY.c1,refName:this.refName})},points:function(){return[new i({x:this.segX.c1,y:this.segY.c1,refName:this.refName}),new i({x:this.segX.c1,y:this.segY.c2,refName:this.refName}),new i({x:this.segX.c2,y:this.segY.c2,refName:this.refName}),new i({x:this.segX.c2,y:this.segY.c1,refName:this.refName})]},clone:function(){return new s(e.prototype.clone.call(this),this.refName)}}),s}),define("detect/detect",["Config/Config"],function(e){var t=function(){return{device:function(){return this.get("isTablet")?"tablet":this.get("isMobile")?"mobile":"desktop"},IEVersion:function(){var e=!1;if(navigator.appName=="Microsoft Internet Explorer"){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");n.exec(t)!=null&&(e=parseFloat(RegExp.$1))}return e},isIE:function(){return!!this.get("IEVersion")},isMobile:/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec/i.test(navigator.userAgent.toLowerCase()),isTablet:/ipad|android 3|sch-i800|playbook|tablet|kindle|gt-p1000|sgh-t849|shw-m180s|a510|a511|a100|dell streak|silk/i.test(navigator.userAgent.toLowerCase()),isIpad:function(){return navigator.userAgent.match(/iPad/i)!==null}}},n=new e({values:t()});return n.get.bind(n)}),define("Skwitch/Animation/DOMView",["Seed/Seed","toDOM","objects/extend","detect/detect"],function(e,t,n,r){return e.extend({"+options":{domDesc:null,el:null},init:function(t){t||(t={}),e.prototype.init.call(this,t),this.el||this.buildEl(t),this.el&&(this.parentEl=t.parentEl||this.parentEl,this.parentEl&&(typeof this.parentEl=="function"&&(this.parentEl=this.parentEl()),t.insertBefore?this.parentEl.insertBefore(this.el,t.insertBefore):this.parentEl.appendChild(this.el)))},buildEl:function(e){this.domDesc&&(this.el=t(typeof this.domDesc=="function"?this.domDesc():this.formatDesc(this.domDesc),this))},hasClass:function(e){if(this.el)return(new RegExp("(\\s|^)"+e+"(\\s|$)")).test(this.el.className)},removeClass:function(e){this.el&&this.hasClass(e)&&(this.el.className=this.el.className.replace(new RegExp("(\\s|^)"+e+"(\\s|$)")," ").replace(/^\s+|\s+$/g,""))},addClass:function(e){this.el&&!this.hasClass(e)&&(this.el.className+=(this.el.className?" ":"")+e)},css:function(e,t){t=t||this.el;var r;if(t)for(var i in e)e.hasOwnProperty(i)&&this.cssFormater[i]&&(r=this.cssFormater[i](e[i]),r&&n(e,r));n(t.style,e)},cssFormater:{rotate:function(e){var t="rotate("+e+"deg)";return{webkitTransform:t,MozTransform:t,transform:t}},opacity:function(e){var t=r("IEVersion");if(t&&t<=8)return e===0?{display:"none"}:{display:"block"}},color:function(e){return{}}},hide:function(){this.el.style.display="none"},show:function(){this.el.style.display="block",this.fire("show")},formatDesc:function(e){if(typeof e=="object"){for(var t in e)if(e.hasOwnProperty(t)&&t.substr(-2)==="_b"){var n=t.substr(0,t.length-2);e[n]=e[t].bind(this)}if(e.children)for(t=e.children.length;t--;)this.formatDesc(e.children)}return e},size:function(){return[this.el.offsetWidth,this.el.offsetHeight]},destroy:function(t){e.prototype.destroy.call(this,t),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}})}),define("Geo/Coordinate",["objects/isArray","Geo/refs"],function(e,t){var n=function(t,n,r){e(t)?(this.x=t[0],this.refName=t[1],this.dimension=t[2]):(this.x=t,this.refName=n,this.dimension=r),typeof this.dimension=="number"&&(this.dimension=this.dimension===1?"y":"x"),this.refName=this.refName||"db"};return n.prototype={isCoordinate:!0,getValue:function(){return this.x},toArray:function(){return[this.x,this.refName,this.dimension]},inRef:function(e){e.isRef&&(e=e.name);if(this.refName!==e){var r=t[this.refName],i=t[e],s=this.dimension==="x"?0:1,o=i.origin[s],u=r.origin[s],a=u-o,f=i.factor[s]||i.factor,l=r.factor[s]||r.factor;return new n((a+this.x/l)*f,e,this.dimension)}return this.clone()},multiply:function(e){return new n(this.x*e,this.refName,this.dimension)},add:function(e){return typeof e=="number"?p2Bis=new n(e,this.refName,this.dimension):p2Bis=e.inRef(this.refName),new n(this.x+p2Bis.x,this.refName,this.dimension)},minus:function(e){var t;return typeof e=="number"?t=new n(e,this.refName,this.dimension):t=e.inRef(this.refName),new n(this.x-t.x,this.refName,this.dimension)},clone:function(){return new n(this.x,this.refName,this.dimension)}},n}),define("Geo/D2Point",["objects/isArray","Geo/refs","Geo/Coordinate"],function(e,t,n){var i=function(t,n,i){e(t)?(t.push("x"),this.x=new r.Coordinate(t)):t.isCoordinate&&(this.x=t),e(n)?(n.push("y"),this.y=new r.Coordinate(n)):n.isCoordinate&&(this.y=n)};return i.prototype={isD2Point:!0,isPoint:!0,inRef:function(t){typeof t=="string"?t={x:t,y:t}:e(t)&&(t={x:t[0],y:t[1]});var n=new i(this.x.inRef(t.x),this.y.inRef(t.y));return n},equals:function(e){var t=e.inRef({x:this.x.refName,y:this.y.refName});return this.getValue().equals(t.getValue())},getValue:function(){return[this.x.getValue(),this.y.getValue()]},multiply:function(e){return new i(this.x.multiply(e),this.y.multiply(e))},toArray:function(e){if(typeof e!="undefined"){var t=e===0?"x":"y";return this[t]}return[this.x,this.y]},add:function(t){var n;return e(t)?n=new i([t[0],this.x.refName],[t[1],this.y.refName]):n=t.inRef([this.x.refName,this.y.refName]),new i(this.x.add(n.x),this.y.add(n.y))},minus:function(t){var n;return e(t)?n=new i([t[0],this.x.refName],[t[1],this.y.refName]):n=t.inRef([this.x.refName,this.y.refName]),new i(this.x.minus(n.x),this.y.minus(n.y))},clone:function(){return new i(this.x.clone(),this.y.clone())}},i}),define("Skwitch/Animation/FrameAttribute",["Seed/Seed"],function(e){return e.extend({"+options":{unformatted:null,name:null,sequenceName:null,frame:null,betweenValues:null},"+init":function(){if(this.unformatted!==null)if(this.unformatted.between){var e=this.unformatted.between,t=this.unformatted.r;this.betweenValues=e,this.value=this.between(e[0],e[1],t)}else this.format?this.value=this.format(this.unformatted):this.value=this.unformatted},setValueBetween:function(e){return this.betweenValues&&(this.value=this.between(this.betweenValues[0],this.betweenValues[1],e)),this.value},getValue:function(){return this.value}})}),define("Skwitch/Animation/frameAttributes/DisplayAttribute",["../FrameAttribute"],function(e){return e.extend({"+options":{value:!0},between:function(e,t){return e&&t}})}),define("Skwitch/Animation/frameAttributes/OpacityAttribute",["../FrameAttribute"],function(e){return e.extend({"+options":{value:1},between:function(e,t,n){return Math.abs(e+n*(t-e))}})}),define("objects/is",["objects/isArray","Function/bind"],function(e){var t=function(){};t.prototype={is:function(e,t){return this["is"+e.capitalize()](t)||!1},isNumber:function(e){return typeof e=="number"},isString:function(e){return typeof e=="string"},isArray:function(t){return e(t)},isFunction:function(e){return typeof e=="function"},isPoint:function(e){return e&&e.isPoint},isPlainObject:function(e){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString;if(!e||n.call(e)!=="[object Object]"||e.nodeType||e.setInterval)return!1;if(e.constructor&&!t.call(e,"constructor")&&!t.call(e.constructor.prototype,"isPrototypeOf"))return!1;var r;for(r in e);return r===undefined||t.call(e,r)}};var n=new t;return n.is.bind(n)}),define("Skwitch/Animation/frameAttributes/PositionAttribute",["../FrameAttribute","Geo/refs","Geo/D2Point","Geo/Coordinate","objects/is"],function(e,t,n,r,i){return e.extend({format:function(e){var t;return i("point",e)?t=e:i("array",e)?t=this.arrayToPoint(e):i("string",e)&&e==="fromName"&&(t=this.getFromName()),t},equals:function(e){var t=this.getValue().equals(e);return t},between:function(e,t,n){e=e.inRef("window"),t=t.inRef("window");var r=e.add(t.minus(e).multiply(n));return r},arrayToPoint:function(e){var t=[],r="scene";return[0,1].each(function(n){var s=e[n],o,u;i("array",s)?(o=s[0],u=s[1]||r):i("number",s)?(o=s,u=e[2]||r):i("string",s)&&(o=s,u=e[2]||r),t[n]=this.numberOrKeywordToCoordinate(o,u,n)}.bind(this)),new n(t[0],t[1])},numberOrKeywordToCoordinate:function(e,t,n){var s=i("string",e);if(s){var o=e;return this.keywordToCoordinate(o,t,n)}if(i("number",e)){var u=e;return new r(u,t,n)}},keywordToCoordinate:function(e,t,n){var r=e.split("+"),i=e.split("-"),s=parseInt(r[1]),o=parseInt(i[1]);r.length>1&&(e=r[0]),i.length>1&&(e=i[0]);var u={top:"left",bottom:"right"};u[e]&&(e=u[e]);var a=this["_from"+e.capitalize()+"ToCoord"](t,n);return o?a.minus(o):s?a.add(s):a},_fromUnchangedToCoord:function(e,t){return this.frame.previousFrame.getValue("position").toArray(t)},_fromLeftToCoord:function(e,t){return(new r(0,"window",t)).minus(this.frame.getValue("size")[t])},_fromRightToCoord:function(e,t){return new r(this._a.rect[e].getValue()[1][t],e,t)},_fromCenterToCoord:function(e,t){return(new r(this._a.rect.window.getCenter()[t],"window",t)).inRef(e).minus(this.frame.getValue("size")[t]/2)},_fromFromNameToCoord:function(e,t){var n=this.getFromName("point").toArray(t);return n},_setFromName:function(){var e=this.sequenceName.split("_-")[1];if(e){var t=e.split("_"),r=t[1].split("x").map(function(e){return parseInt(e)});this._fromName=new n([r[0],"scene"],[r[1],"scene"])}},getFromName:function(e){return this._fromName||this._setFromName(),this._fromName?this._fromName:!1}})}),define("Skwitch/Animation/frameAttributes/RotateAttribute",["../FrameAttribute"],function(e){return e.extend({"+options":{},between:function(e,t,n){return Math.round(e+n*(t-e))%360}})}),define("Skwitch/Animation/frameAttributes/AbstractRateAttribute",["../FrameAttribute"],function(e){return e.extend({"+options":{},between:function(e,t,n){return Math.abs(e+n*(t-e))}})}),define("Skwitch/Animation/frameAttributes/ScrollAttribute",["./AbstractRateAttribute"],function(e){return e.extend({})}),define("Skwitch/Animation/frameAttributes/SizeAttribute",["../FrameAttribute","objects/is"],function(e,t){return e.extend({format:function(e){var n=[],r,i,s,o=e.length===1;return t("array",e)?e.length>2?(s=e[2],r=[],i=e,[0,1].each(function(e){if(typeof i[e]=="string"){var t=i[e].split("%")[0]/100;r[e]=this._a.rect[s].getValue()[1][e]*t}else r[e]=i[e]}.bind(this)),n=r):e.length===1?(s=e[0],n=this._a.rect[s].getValue()[1]):n=e:t("string",e)&&(e==="fromName"?(this._setFromName(),n=this.getFromName("size")):(s=e,n=this._a.rect[s].getValue()[1])),n},between:function(e,t,n){return e.add(t.minus(e).multiply(n))},_setFromName:function(){var e=this.sequenceName.split("_-")[1];if(e){var t=e.split("_"),n=t[0].split("x").map(function(e){return parseInt(e)});this._fromName=n}},getFromName:function(){return this._fromName||this._setFromName(),this._fromName?this._fromName:!1}})}),define("Skwitch/Animation/frameAttributes/DisplayAttribute",["../FrameAttribute"],function(e){return e.extend({"+options":{value:0},between:function(e,t,n){return Math.abs(e+n*(t-e))}})}),define("Skwitch/Animation/frameAttributes/SpriteStateAttribute",function(){}),define("Skwitch/Animation/frameAttributes/ColorAttribute",["../FrameAttribute","objects/is"],function(e,t){return e.extend({"+options":{value:[0,0,0]},format:function(e){var n;return t("array",e)?n=e:n=this.hexToRgb(e),n.length===3&&n.push(1),n},between:function(e,t,n){var r=[e,t].map(this.format.bind(this));return r[1].minus(r[0]).multiply(n).add(r[0]).map(function(e,t){return t!==3?parseInt(e,10):e})},hexToRgb:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?t.splice(0,1)&&t.map(function(e){return parseInt(e,16)}):[0,0,0]}})}),define("Skwitch/Animation/frameAttributes/all",["./DisplayAttribute","./OpacityAttribute","./PositionAttribute","./RotateAttribute","./ScrollAttribute","./SizeAttribute","./SpriteStateAttribute","./ColorAttribute"],function(e,t,n,r,i,s,o,u){return{DisplayAttribute:e,OpacityAttribute:t,PositionAttribute:n,RotateAttribute:r,ScrollAttribute:i,SizeAttribute:s,SpriteStateAttribute:o,ColorAttribute:u}}),define("Skwitch/Animation/Frame",["Seed/Seed","./frameAttributes/all"],function(e,t){return e.extend({"+options":{unformattedAttributesInit:null,attributesName:[],previousFrame:null,sequenceName:null,instant:null,betweenIndexes:null,index:null,between:null,r:null},isFrame:!0,"+init":function(){this.attributesName.has("size")&&(this.attributesName.removeOneValue("size"),this.attributesName.unshift("size")),this.unformattedAttributesInit?(this.formatedAttributeInit=this.formatAttributesInit(this.unformattedAttributesInit),this.attribute={},this.attributesName.each(function(e){this.attribute[e]=this.buildAttribute(e)}.bind(this))):this.between&&this.buildFromBetweens()},isBetween:function(e){return this.between?this.between.equals(e):!1},buildFromBetweens:function(){this.attribute={},this.formatedAttributeInit={},this.attributesName.each(function(e){this.formatedAttributeInit[e]={between:this.between.map(function(t){return t.getValue(e)}),r:this.r},this.attribute[e]=this.buildAttribute(e)}.bind(this))},getValue:function(e){return this.attribute[e].getValue()},getValues:function(){var e={};return this.attributesName.map(function(t){e[t]=this.attribute[t].getValue()}.bind(this)),e},update:function(){this.between&&this.buildFromBetweens()},setValuesBetween:function(e){this.attributesName.each(function(t){this.attribute[t].setValueBetween(e)}.bind(this))},buildAttribute:function(e){var n=t[e.capitalize()+"Attribute"];return n||console.log("[debug] no constructor for ",e,"attribute."),this.sub(t[e.capitalize()+"Attribute"],{name:e,unformatted:this.formatedAttributeInit[e],sequenceName:this.sequenceName,frame:this})},formatAttributesInit:function(){var e={},t=this.unformattedAttributesInit;return this.attributesName.each(function(n){n in t?e[n]=t[n]:this.previousFrame?e[n]=this.previousFrame.getValue(n):n==="display"?e.display=!0:n==="size"&&(e.size=[1,1])}.bind(this)),e}})}),define("Skwitch/Animation/Sequence",["./DOMView","Geo/Coordinate","Geo/D2Point","./Frame","objects/is","detect/detect"],function(e,t,n,r,i,s){return e.extend({"+options":{unformattedFramesInit:null,framesInit:null,domDesc:null,debug:!1,name:"untitled",weak:!1,forceRender:!1,security:null,size:null,keyInstant:null,parentEl:null},"+init":function(){this.framesInit&&!this.unformattedFramesInit&&(this.unformattedFramesInit=this.framesInit,this.framesInit=null),this.name&&!this.unformattedName&&(this.unformattedName=this.name),this.weak||this.build()},build:function(e){this._isBuilt||(this.doBuild(e),this._isBuilt=!0)},hide:function(){this.el&&(this.el.style.display="none")},show:function(){this.el&&(this.el.style.display="block")},doBuild:function(e){this.name=this.formatName(this.unformattedName),this.buildFrames(),this.renderFrame(0),this._a.on("resize",this.onResize.bind(this),this),delete this.unformattedFramesInit,delete this.unformattedName,delete this.framesInit},formatName:function(e){if(i("function",e))return e();if(i("string",e))return e},buildFrames:function(){this.frames=[],this.unformattedFramesInit&&(this.formatFramesInits(),this.setAttributesNames(),this.formattedFramesInits.each(function(e,t){this.frames.push(this.buildFrame(e,t))}.bind(this))),this.debug&&console.log("[debug]",this.name,this,"el",this.el,"parentEl",this.parentEl),this.debug&&console.log("[debug]",this.name,"frames",this.frames)},setAttributesNames:function(){this.attributesName=[],this.formattedFramesInits.each(function(e){for(var t in e.attributes)e.attributes.hasOwnProperty(t)&&(this.attributesName.has(t)||this.attributesName.push(t))}.bind(this))},formatFramesInits:function(){this.formattedFramesInits=[],this.formattedFramesInits=this.unformattedFramesInit.map(this.formatFrameInit.bind(this))},onResize:function(){this.destroy(),this.build(),this.render({force:!0})},render:function(e){var t;e=e||{};if(e.force&&this.currentFrame){if(this.currentFrame.between){e.between=this.currentFrame.betweenIndexes,e.r=this._a.timeline.appState,this.setCurrentFrameBetween(e);return}this.renderFrame(this.currentFrame.index);return}this.currentFrame&&(this.lastValues=this.currentFrame.getValues()),this.setCurrentFrame(e),this._renderAttributes()},_renderAttributes:function(){this.attributesName&&this.attributesName.each(this._renderAttribute.bind(this))},_renderAttribute:function(e){if(this.forceRender||this.el||this.canvasEl||this.raphaelEl){var t=this.currentFrame.attribute[e];this._isToBeRendered(t)&&this._doRenderAttribute(t)}},_isToBeRendered:function(e){return this.forceRender||!this.lastValues||this._hasValueUnequal(e)},_hasValueUnequal:function(e){return e.equals?!e.equals(this.lastValues[e.name]):this.lastValues[e.name]!==e.getValue()},_doRenderAttribute:function(e){this["_render"+e.name.capitalize()](e.getValue())},setCurrentFrame:function(e){if(e.isFrame){this.currentFrame=e;return}var t,n;if(e.between)this.setCurrentFrameBetween(e);else{t={previousFrame:this.currentFrame,instant:this._a.timeline.getAppState()},n=e,t.attributes=n;var r=this.formatFrameInit(t);this.currentFrame=this.buildFrame(r)}},setCurrentFrameBetween:function(e){e.now=this._a.timeline.appState,e.frameBetweens=e.between.map(function(e){return this.frames[e]}.bind(this)),this.currentFrame.isBetween(e.frameBetweens)?this._updateCurrentBetweenFrame(e):(this._buildNewCurrentBetweenFrame(e),this.debug==="frames"&&console.log("[debug]",this.name,"currentFrame",this.currentFrame))},_updateCurrentBetweenFrame:function(e){this.currentFrame.setValuesBetween(e.r)},_buildNewCurrentBetweenFrame:function(e){this.currentFrame=this.buildFrame({instant:e.now,between:e.frameBetweens,betweenIndexes:e.between,r:e.r,previousFrame:this.currentFrame})},renderFrameEnd:function(){this.renderFrame(this.frames.length-1)},renderFrame:function(e){var t=this.frames[e];t&&this.render(t)},isSequence:!0,formatFrameInit:function(e){var t=this.formatFrameTimeAndAttribute(e),n=t.attributes,r={};return i("array",n)?r.position=n:i("plainObject",n)?r=n:i("string",n)&&n==="fromName"&&(r.position="fromName"),{attributes:r,instant:t.instant,previousFrame:e.previousFrame||null}},formatFrameTimeAndAttribute:function(e){var t={};return i("array",e)?t={attributes:e[0],instant:e[1]}:i("plainObject",e)&&(t=e),t.instant=this.formatInstants(t.instant),t},formatInstants:function(e){var t;return i("string",e)?(e==="start",t=this.keyInstant[e]):i("number",e)&&(t=e),t},buildFrame:function(e,t){return this.sub(r,{index:t,unformattedAttributesInit:e.attributes,instant:e.instant,attributesName:this.attributesName,previousFrame:e.previousFrame||t&&this.frames[t-1]||null,sequenceName:this.name,between:e.between||null,r:e.r,betweenIndexes:e.betweenIndexes||null})},_renderRotate:function(e){this.css({rotate:e})},_renderSize:function(e){var t=e;this.el.style.width=t[0]+"px",this.el.style.height=t[1]+"px"},_renderColor:function(e){var t;if(s("isIE")&&s("IEVersion")<=8){e.length>3&&e.splice(3,1);var n=e.map(function(e){var t=e.toString(16);return t.length===1?"0"+t:t}).join("");t="#"+n}else t="rgba("+e.join()+")";this.css({color:t})},_renderOpacity:function(e){this.debug==="opacity"&&console.log(e),e<0&&(e=0),e>1&&(e=1),this.css({opacity:e})},_renderDisplay:function(e){this.debug==="display"&&console.log("[debug]",this.name,"display",e),e?this.el.style.display="block":this.el.style.display="none"},_renderPosition:function(e){var t=e.inRef("db").getValue();this.debug==="frames"&&console.log("[debug]",this.name,"p final",t),this.css({left:t[0]+"px",top:t[1]+"px"})},"+destroy":function(){this._isBuilt=!1}})}),define("Array/eachPair",[],function(){Array.prototype.eachPair=function(e){var t=this.length;for(var n=0;n<t-1;n++)e(this[n],this[n+1],n);return this}}),define("Skwitch/Animation/Animation",["./Sequence","objects/extend","Seed/Seed","objects/is","Array/eachPair"],function(e,t,n,r,i){var s=e.extend({"+options":{parentAnimation:null,start:0,end:430,security:400,parentEl:null,domDesc:null,keyInstant:null},"+init":function(){},"+doBuild":function(e){this.setParentEl(),this.setTimeline(),this.initEventsTimeline(),this.buildSequences(),e&&e.state&&this.fire("tick",e.state-this.timeline.start-this.start),delete this.unformattedSequencesInit,delete this.sequencesInit},setParentEl:function(){this.parentEl=this.parentEl||this._a.el},setTimeline:function(){this.parentAnimation?this.timeline=this.parentAnimation:this.timeline=this._a.timeline},initEventsTimeline:function(){this.appState=this.timeline.appState-this.start,this.timeline.on("tick",function(e){this.appState=e-this.start,this.beforeTick&&this.beforeTick(e-this.start),this.fire("tick",e-this.start),this.afterTick&&this.afterTick(e-this.start)}.bind(this),this)},between:function(e,t,n){n=this.formatBetweenOption(n),this.on("tick",function(r){var i=r>=e&&r<=t,s=n._running;i?(s||n.enter&&n.enter(r-e),n._running=!0,n.during&&n.during.call(self,(r-e)/(t-e))):s&&(n.out&&n.out(),n._running=!1)}.bind(this),this)},buildBetweens:function(e){e.frames.eachPair(function(t,n,r){this.buildBetween(t,n,r,e)}.bind(this))},buildBetween:function(e,t,n,r){var i=[e.instant,t.instant];n===0&&this.buildBetweenToBeginning(i,r),n===r.frames.length-2&&this.buildBetweenToEnd(i,r),this.buildBetweenDuring(i,r,n)},buildBetweenDuring:function(e,t,n){var r={during:function(e){t.render({between:[n,n+1],r:e})}.bind(this)};this.between(e[0],e[1],r)},buildBetweenToBeginning:function(e,t){var n=-t.security||-this.security||-20;this.between(n,e[0],function(){t.renderFrame(0)})},buildBetweenToEnd:function(e,t){var n=t.security||this.security||e[1]+20;this.between(e[1],n,function(e){t.renderFrameEnd()})},formatBetweenOption:function(e){var t,n;return r("function",e)?(n=e,t={during:n}):t=e,t},buildSequences:function(){this.sequencesInit&&!this.unformattedSequencesInit&&(this.unformattedSequencesInit=this.sequencesInit,this.sequencesInit=null),!this.unformattedSequencesInit&&this.buildSequencesInit&&(this.unformattedSequencesInit=this.buildSequencesInit()),this.unformattedSequencesInit||(this.unformattedSequencesInit=[]),this.sequences=[],this.sequencesInit=this.formatSequencesInit(this.unformattedSequencesInit),this.sequencesInit.each(function(e){e.render!==!1&&this.sequences.push(this.buildSequence(e))}.bind(this))},formatSequencesInit:function(e){var t;return r("function",e)?t=e.call(this):t=e,t},buildSequence:function(e){this.sequence={},e=this.formatSequenceInit(e);var t=this.sub(e.cstr,e);return this.sequence[t.name]=t,this.buildBetweens(t),t},formatSequenceInit:function(n){var r={};r=t({parentEl:n.parentEl||this.el||this.parentEl,render:!0,cstr:e,keyInstant:this.formatKeyInstant(this.keyInstant)},n);if(r.type){var i="format"+r.type.capitalize()+"Type";this[i]&&(formated=this[i](r))}return r},formatImgType:function(e){var t=e.extension||"png",n=e.src||"/assets/"+this.name+"/"+e.name+"."+t,r;return e.domDesc={tag:"img",style:{zIndex:e.zIndex||""},attr:{src:n,"class":"sequence"}},r=e,r},formatAnimationType:function(e){var t=e;return t.start=e.start||this.start,t.end=e.end||this.end,t.parentAnimation=this,t},formatKeyInstant:function(e){var t=this.keyInstant||{};return t.start=r("number",this.start)&&this.start||0,t.end=this.end||430,t},isAnimation:!0,destroy:function(){this._isBuilt&&(n.prototype.destroy.call(this),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el),this.sequences&&this.sequences.send("destroy"),this._isBuilt=!1)}});return s}),define("app/animations/Scene1",["Skwitch/Animation/Animation","toDOM","objects/is"],function(e,t,n){return e.extend({"+options":{start:0,end:430,keyInstant:{},sequencesInit:function(){return[{type:"domDesc",name:"hello",domDesc:{className:"sequence",style:{zIndex:1},children:[{tag:"h1",innerHTML:"HELLO !"}]},className:"sequence",framesInit:[[{position:[10,210,"window"],size:[400,360],color:"#ffffff"},0],[{color:[0,0,0]},5],[{},20],[{display:!1},70],[{display:!1},71]]},{type:"domDesc",name:"play",domDesc:{className:"sequence",style:{zIndex:1},children:[{tag:"h1",innerHTML:"LET'S PLAY"}]},className:"sequence",framesInit:[[{position:[10,210,"window"],size:[600,70],opacity:0,rotate:0,color:"#ffffff"},0],[{},10],[{opacity:1},20],[{},30],[{position:[["center","scene"],"center","scene"],rotate:30},40],[{},50],[{rotate:0,position:["center+250","center","scene"]},55],[{color:[0,255,255]},60],[{color:[255,0,0]},65],[{color:[255,255,0]},75],[{color:"#ffffff",position:["unchanged","top","scene"]},85]]},{type:"domDesc",name:"welcome_to",domDesc:{className:"sequence",children:[{tag:"h2",innerHTML:"WELCOME TO <br/> SKWITCH"}],style:{zIndex:1}},framesInit:[[{color:"#ffffff",position:[10,360,"window"],size:[475,75],opacity:1,display:!0},0],[{},10],[{opacity:0},20],[{display:!1},30]]},{type:"domDesc",name:"square1",domDesc:{style:{backgroundColor:"#000"},className:"sequence"},framesInit:[[{position:[0,200,"window"],size:[310,110],rotate:0,opacity:1},0],[{position:[0,345,"window"],size:[467,132]},5],[{},10],[{position:[0,0,"window"],size:["window"]},20],[{position:[-300,0,"window"]},25],[{position:[0,0,"window"]},30],[{position:["center","center","window"],size:["scene"]},40],[{},50],[{position:["center+150","center+10","scene"],size:[440,80]},55],[{},60],[{},65],[{position:["center","center"],size:["window"]},75],[{position:["center","top","window"]},85]]}]}},"+init":function(){this.buildAppStateEl(),this.initEvents()},buildAppStateEl:function(){this.appStateEl=t({className:"state",style:{display:"none"}}),this.parentEl.appendChild(this.appStateEl),this._a.timeline.on("tick",function(e){this.appStateEl.innerHTML=Math.round(e*100)/100}.bind(this),this)},initEvents:function(){this.between(0,200,{enter:function(){console.log("enter 65-200"),this.appStateEl.style.display="block"}.bind(this),out:function(){console.log("out 65-200"),this.appStateEl.style.display="none"}.bind(this),during:function(e,t){}})}})}),define("app/sequences/ScrollableSequence",["Skwitch/Animation/Sequence","toDOM"],function(e,t){return e.extend({"+options":{viewportHeight:100,paragraphEl:null},"+init":function(e){this.paragraphContainer.appendChild(this.paragraphEl),this.detectHeight()},buildEl:function(){this.el=t({className:"scrollable_sequence viewport sequence",style:{overflow:"hidden",height:this.viewportHeight},children:[{className:"paragraph_container",label:"paragraphContainer",style:{position:"absolute"}}]},this)},detectHeight:function(){this.setViewportHeight();var e=this.paragraphEl.offsetHeight;e&&e<this.viewportHeight&&(this.paragraphEl.offsetHeight=this.viewportHeight,e=this.viewportHeight),this.paragraphHeight=e,this.paragraphHeight+=3},_renderScroll:function(e){this.setViewportHeight();var t=(this.paragraphHeight-this.viewportHeight)*e;t&&(this.paragraphContainer.style.marginTop=-t+"px")},setViewportHeight:function(){this.viewportHeight=this.currentFrame.attribute.size.getValue()[1]}})}),define("app/animations/Parallax",["Skwitch/Animation/Animation","toDOM","app/sequences/ScrollableSequence"],function(e,t,n){return e.extend({"+options":{start:75,end:150,elements:150},buildSequencesInit:function(){var e=[];for(var t=0;t<this.elements;t++)e.push(this.buildParallaxElementInit(t));return e.push(this.buildScrollSequenceInit()),e},buildParallaxElementInit:function(e){var t=Math.random,n=[10,10].multiply(Math.round(t()*10)).add(10),r=10*t()+5,i=t()*(this.end-this.start),s=i+r;return position=this._a.rect.window.getValue()[1].multiply(t()).minus(n.divide(2)),positionX=position[0],doRotate=i>30,rotation=720*t()-360,{type:"domDesc",domDesc:{className:"sequence",style:{backgroundColor:"#000"}},framesInit:[[{position:[positionX,"bottom","window"],size:n,rotate:0},i],[{position:["unchanged","top-100","window"],rotate:doRotate?rotation:0},s]]}},buildScrollSequenceInit:function(){return{type:"cstr",cstr:n,paragraphEl:t({className:"sequence parallax",children:[{tag:"h1",innerHTML:"PARALLAX!"},{tag:"h1",innerHTML:"MAXIMUM WOW!"}]}),framesInit:[[{size:[600,70],position:[["center+250","scene"],["bottom","window"]],opacity:0,scroll:0},0],[{opacity:1,position:["unchanged",["center","scene"]]},10],[{},15],[{scroll:.5},20],[{},25],[{scroll:1},30],[{},65],[{opacity:0},70]]}}})}),define("app/Main",["Function/bind","Array/all","String/all","Skwitch/Timeline/Timeline","Config/Config","app/configs","app/magnets","Geo/Ref","Geo/Rect","Skwitch/Animation/DOMView","Seed/Seed","toDOM","./animations/Scene1","app/animations/Parallax"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p){return l.extend({"+init":function(){this._a=this,window.console||(window.console=function(){}),this.body=new f({el:document.body}),this.buildConfig(),this.buildTimeline(),this.setVersion(),this.buildRefsRects(),this.buildEl(),this.buildScenes(),this.timeline.play(),this.initEvents()},initEvents:function(){this._resizing=0,window.onresize=this.onResizeLater.bind(this)},onResizeLater:function(){this._resizing++,this.el.style.display="none",setTimeout(function(){this._resizing--,this._resizing||(this.onResize(),this.el.style.display="block")}.bind(this),200)},onResize:function(){this.reload()},reload:function(){var e=this.timeline.appState;this.timeline.pause(),this.destroy(),this.body.el.innerHTML="",this.init({initState:e})},buildConfig:function(){this.config=this.sub(i,{values:s()})},buildTimeline:function(){this.timeline=this.sub(r,{config:this.config,magnets:o})},buildEl:function(){this.el=c({className:"skwitch_container skwitch_window"}),this.body.el.appendChild(this.el)},buildRefsRects:function(){this.buildRects(),this.buildRefs()},buildRects:function(){this.rect={},this.rect.db=new a([[0,0],this.bodySize]);var e=this.rect.db.getValue()[1];this.rect.window=new a(this.rect.db.getValue()),this.rect.scene=new a([this.rect.window.getValue()[1].minus(this.sceneSize).divide(2),this.sceneSize])},buildRefs:function(){this.ref={},this.ref.db=new u({factor:1,origin:[0,0],name:"db"}),this.ref.scene=new u({factor:1,origin:this.rect.scene.getValue()[0],name:"scene"}),this.ref.window=new u({factor:1,origin:[0,0],name:"window"})},setVersion:function(){this.bodySize=[document.body.offsetWidth,document.body.offsetHeight];var e=this.bodySize,t={};this.config.set("version",t),e[0]>=1024&&e[1]>=576?(t.l="1024x576",t.s=10,this.sceneSize=[1024,576]):e[0]<=768||e[1]<=432?(t.l="320x416",t.s=3,this.sceneSize=[320,416]):(t.l="768x423",t.s=3,this.sceneSize=[768,432]),console.log("version : ",t.l),console.log(t.l)},buildScenes:function(){this.scenes=[],this.scenes.push(this.sub(h)),this.scenes.push(this.sub(p))}})}),define("domReady/domReady",[],function(){function u(e){var t;for(t=0;t<e.length;t+=1)e[t](s)}function a(){var e=o;i&&e.length&&(o=[],u(e))}function f(){i||(i=!0,n&&clearInterval(n),a())}function c(e){return i?e(s):o.push(e),c}var e,t,n,r=typeof window!="undefined"&&window.document,i=!r,s=r?document:null,o=[];if(r){if(document.addEventListener)document.addEventListener("DOMContentLoaded",f,!1),window.addEventListener("load",f,!1);else if(window.attachEvent){window.attachEvent("onload",f),t=document.createElement("div");try{e=window.frameElement===null}catch(l){}t.doScroll&&e&&window.external&&(n=setInterval(function(){try{t.doScroll(),f()}catch(e){}},30))}document.readyState==="complete"&&f()}return c.version="2.0.1",c.load=function(e,t,n,r){r.isBuild?n(null):c(n)},c}),requirejs.config({baseUrl:"javascript/modules",paths:{app:"../app",toDOM:"../modules/toDOM/toDOM"}}),require(["app/Main","domReady/domReady"],function(e,t){t(function(){window.app=new e})}),define("../application",function(){});