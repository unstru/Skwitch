define("Skwitch/Animation/frameAttributes/PositionAttribute",["../FrameAttribute","Geo/refs","Geo/D2Point","Geo/Coordinate","objects/is"],function(e,t,n,r,i){return e.extend({format:function(e){var t;return i("point",e)?t=e:i("array",e)?t=this.arrayToPoint(e):i("string",e)&&e==="fromName"&&(t=this.getFromName()),t},equals:function(e){var t=this.getValue().equals(e);return t},between:function(e,t,n){e=e.inRef("window"),t=t.inRef("window");var r=e.add(t.minus(e).multiply(n));return r},arrayToPoint:function(e){var t=[],r="scene";return[0,1].each(function(n){var s=e[n],o,u;i("array",s)?(o=s[0],u=s[1]||r):i("number",s)?(o=s,u=e[2]||r):i("string",s)&&(o=s,u=e[2]||r),t[n]=this.numberOrKeywordToCoordinate(o,u,n)}.bind(this)),new n(t[0],t[1])},numberOrKeywordToCoordinate:function(e,t,n){var s=i("string",e);if(s){var o=e;return this.keywordToCoordinate(o,t,n)}if(i("number",e)){var u=e;return new r(u,t,n)}},keywordToCoordinate:function(e,t,n){var r=e.split("+"),i=e.split("-"),s=parseInt(r[1]),o=parseInt(i[1]);r.length>1&&(e=r[0]),i.length>1&&(e=i[0]);var u={top:"left",bottom:"right"};u[e]&&(e=u[e]);var a=this["_from"+e.capitalize()+"ToCoord"](t,n);return o?a.minus(o):s?a.add(s):a},_fromUnchangedToCoord:function(e,t){return this.frame.previousFrame.getValue("position").toArray(t)},_fromLeftToCoord:function(e,t){return(new r(0,"window",t)).minus(this.frame.getValue("size")[t])},_fromRightToCoord:function(e,t){return new r(this._a.rect[e].getValue()[1][t],e,t)},_fromCenterToCoord:function(e,t){return(new r(this._a.rect.window.getCenter()[t],"window",t)).inRef(e).minus(this.frame.getValue("size")[t]/2)},_fromFromNameToCoord:function(e,t){var n=this.getFromName("point").toArray(t);return n},_setFromName:function(){var e=this.sequenceName.split("_-")[1];if(e){var t=e.split("_"),r=t[1].split("x").map(function(e){return parseInt(e)});this._fromName=new n([r[0],"scene"],[r[1],"scene"])}},getFromName:function(e){return this._fromName||this._setFromName(),this._fromName?this._fromName:!1}})});